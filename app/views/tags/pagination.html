%{
totalPages = (int) ((_totalElements + _size - 1) / _size)
if (totalPages == 0) {
    totalPages = 1
}
if (_page <= 3) {
    begin = 1
} else {
    begin = _page - 2
}
if (totalPages - begin < 4) {
    begin = totalPages - 4
}
if (begin < 1) {
    begin = 1
}
end = begin + 4
if (end > totalPages) {
    end = totalPages
}
}%

<nav aria-label="Page navigation example">
    <ul class="pagination pagination-sm justify-content-end">
        <li class="page-item ${_page == 1 ? 'disabled' : ''}">
            <a class="page-link" href="${request.path}">&laquo;</a>
        </li>
        <li class="page-item ${_page == 1 ? 'disabled' : ''}">
            <a class="page-link" href="${request.path}?page=${_page - 1}">‹</a>
        </li>
        %{ for (i in begin..end) { }%
            #{if ((begin + 4 == i && end != totalPages) || (end - 4 == i && begin > 1))}
                <li class="page-item disabled">
                    <a class="page-link" href="${request.path}?page=${i}">…</a>
                </li>
            #{/if}
            #{else}
                <li class="page-item ${_page == i ? 'active' : ''}">
                    <a class="page-link" href="${request.path}?page=${i}">${i}</a>
                </li>
            #{/else}
        %{ } }%
        <li class="page-item ${_page >= totalPages ? 'disabled' : ''}">
            <a class="page-link" href="${request.path}?page=${_page + 1}">›</a>
        </li>
        <li class="page-item ${_page >= totalPages ? 'disabled' : ''}">
            <a class="page-link" href="${request.path}?page=${totalPages}">»</a>
        </li>
    </ul>
</nav>
#{if totalPages > 1}
#{/if}
